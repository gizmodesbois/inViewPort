function getViewportHeight(){var e=window.innerHeight;var t=document.compatMode;if(t||!$.support.boxModel){e=t=="CSS1Compat"?document.documentElement.clientHeight:document.body.clientHeight}return e}jQuery.fn.inViewPort=function(e,t){e=jQuery.extend({offsetTop:0,offsetLeft:0,offsetHeight:0,offsetWidth:0,viewport:$(window),spot:"top",inView:function(){},outView:function(){},callback:function(){}},e);var n=e.viewport,r=$(this);n.scroll(function(){var t=getViewportHeight(),n=document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop,i=document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft,s=r.offset().top+e.offsetTop,o=e.spot=="bottom"||e.spot=="bottomLeft"||e.spot=="bottomRight"?r.height()+e.offsetHeight:0+e.offsetHeight,u=r.offset().left+e.offsetLeft,a=e.spot=="right"||e.spot=="topRight"||e.spot=="bottomRight"?r.width()+e.offsetWidth:0+e.offsetWidth,f=r.data("inviewport")||false;if(e.spot=="top"||e.spot=="bottom"||e.spot=="left"||e.spot=="right"){if(e.spot=="top"||e.spot=="bottom"){if(n>s+o||n+t<s){if(f){r.data("inviewport",false);r.trigger("inviewport",[false])}}else if(n<s+o){if(!f){r.data("inviewport",true);r.trigger("inviewport",[true])}}}else if(e.spot=="left"||e.spot=="right"){if(i>u+a||i+t<u){if(f){r.data("inviewport",false);r.trigger("inviewport",[false])}}else if(i<u+a){if(!f){r.data("inviewport",true);r.trigger("inviewport",[true])}}}}else if(e.spot=="topLeft"||e.spot=="bottomLeft"||e.spot=="topRight"||e.spot=="bottomRight"){if((n>s+o||n+t<s)&&(i>u+a||i+t<u)){if(f){r.data("inviewport",false);r.trigger("inviewport",[false])}}else if(n<s+o||i<u+a){if(!f){r.data("inviewport",true);r.trigger("inviewport",[true])}}}});r.bind("inviewport",function(t,n){if(n==true){e.inView.call(this)}else{e.outView.call(this)}});n.scroll();e.callback.call(this)}